 <!DOCTYPE html>
<html>
<head>
    <title>Elaw.my</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/jquery.mobile-1.3.0.min.css" />
    <script src="js/jquery-1.8.2.min.js"></script>
    <script src="js/jquery.mobile-1.3.0.min.js"></script>
   
    <script>
    </script>
   
</head>
<body>
 <div data-role="page" id="lssResult">
 <div data-role="content">
        <div data-role="header" data-position="fixed" data-id="header1">
            <h1 data-theme="e">Elaw.my</h1>
            <a href="" id="linkback" data-icon="arrow-l" data-theme="b">Back</a>
            <a href="options.html" data-icon="gear" class="ui-btn-right" data-theme="b">Options</a>  
        </div><!-- /header -->
       <ul data-role="listview" id="mylist2">
            <!-- <li data-role="list-divider">High Court Kuala Lumpur</li>
            <li><a href="">Audi</a></li>
            <li><a href="">BMW</a></li> -->
        </ul>		
        <div data-role="footer" data-position="fixed" data-id="footer1" data-tap-toggle="false">        
                <div data-role="navbar">
                    <ul id="footerList">
                        <li><a href="#" data-icon="star" class="">Latest</a></li>
                        <li><a href="caseSearch.html" data-icon="search">Cases</a></li>
                        <li><a href="legislationSearch.html" data-icon="search" data-theme="e">Legislation</a></li>
                        <li><a href="references.html" data-icon="info">References</a></li>
                        <li><a href="help.html" data-icon="alert">Help</a></li>
                    </ul>
                </div>
        </div>    
        </div>
    <script>
    $.urlParam = function(name){
    var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);
    if(results)
        return results[1] || '';
    else
        return '';
    }
	$("#linkback").bind("click",function(){
		window.history.back();
	});
	
    function runIt(){
		$("#footerList a").each(function(){				
				var url = $(this).attr('href');
				url += '?u='+$.urlParam('u');
				$(this).attr('href',url);
		});
		var ec = $.urlParam('ec');
        var filename = $.urlParam('name')
        var url = 'http://elaw.com.my/test2/mobile/legislationsearchmobile.aspx?&filename='+filename;
        url += '&callback=?';	
		console.log(url);
        $.getJSON(url,function(data){
			var html = '';
			console.log(data);
			//console.log(data.results[0]);
			$.each(data.result,function(index,elem){				
			html += '<li><a href="case2.html?filename='+filename+'&part='+index+'" rel="external"><h1>'+elem+'</h1><p>'+index+'</p></a></li>';
			});
			//console.log(html);
			if(html === ''){
				html = '<li>No results</li>'
				//console.log(html);
			}
				$('#mylist2').html(html);
				$('#mylist2').listview('refresh');
              
        });
    }
    //$('#lsResult').on('pageshow', runIt);
    $('#lssResult').on('pageshow', runIt);
    //$("#resultMain2").swiperight(function(){
    //    $.mobile.changePage("caseSearch.html",{transition:"slide",reverse:true});
    //});
    </script>
    </div>
</body>
<html>