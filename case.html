 <!DOCTYPE html>
<html>
<head>
    <title>Elaw.my</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/jquery.mobile-1.3.0.min.css" />
    <script src="js/jquery-1.8.2.min.js"></script>
    <script src="js/jquery.mobile-1.3.0.min.js"></script>
   
    <script>
    </script>
   
</head>
<body>
 <div data-role="page" id="caseMain" data-add-back-btn="true">
 <div data-role="content">
        <div data-role="header" data-position="fixed" data-id="header1" data-tap-toggle="false">
            <h1 data-theme="e">Elaw.my</h1>
            <a id="linkback" href="searchItems.html" data-icon="arrow-l" data-theme="b">Back</a>
            <a href="index.html" data-icon="gear" class="ui-btn-right" data-theme="b">Home</a>  
        </div><!-- /header -->
        <h1 align="center">
            
        </h1>
       <div id="results">
       	
       </div>
        <div data-role="footer" data-position="fixed" data-tap-toggle="false" data-id="footer1">        
            <div data-role="navbar">
                <ul id="footerList">
                    <li><a href="latest.html" data-icon="star">Latest</a></li>
                    <li><a href="caseSearch.html" data-icon="search" class="" data-theme="e">Cases</a></li>
                    <li><a href="legislationSearch.html" data-icon="search">Legislation</a></li>
                    <li><a href="#popupMenu" data-rel="popup" data-role="button" data-inline="true" data-icon="gear">More</a></li>
                </ul>
            </div><!-- /navbar -->
        </div><!-- /footer --> 
         <div data-role="popup" id="popupMenu" id="footerlist2">
            <ul data-role="listview" data-inset="true" style="min-width:210px;">
                <li><a href="references.html">References</a></li>
                <li><a href="help.html">Help</a></li>                            
            </ul>
        </div>        
        </div> <!-- ending content -->
    <script>
    function makeUrl(p){
        var filename = $.filename;
        //var ec = $.urlParam('ec');
        var url = 'http://elaw.com.my/Elawf4/mobile/searchresultmobile.aspx?filename='+filename;
        var page = '';
        if($.casePage){
            $.casePage += 1;
            page = $.casePage;
        }
        else{
            page = 1;
            $.casePage = 1;    
        }            
        url += '&p='+page;
        url += '&callback=?';
        //console.log(url);
        return url;
    }
    function runIt(){
        $.casePage = 0;
        var urltext = makeUrl();
        $.mobile.loading('show');
        $.getJson(urltext,'caseMain');
        $(window).on('scroll',function(){
            if($.mobile.activePage.attr('id') == 'caseMain'){
                if($(window).scrollTop() + $(window).height() >= $(document).height()){
                    if($.scrollAndLoad){                
                        url = makeUrl();
                        console.log(url);
                        if($.casePage <= $.lastPage){
                            $.getJson(url,'caseMain');
                            $.mobile.loading('show');
                        }                        
                        $.scrollAndLoad = false;
                        
                    }                
                }
            }    
        });
    }
    $('#caseMain').on('pageshow', runIt);  
    </script>
    </div>
</body>
<html>
