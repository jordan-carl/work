 <!DOCTYPE html>
<html>
<head>
    <title>Elaw.my</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/jquery.mobile-1.3.0.min.css" />
    <script src="js/jquery-1.8.2.min.js"></script>
    <script src="js/jquery.mobile-1.3.0.min.js"></script>
   
    <script>
    </script>
   
</head>
<body>
 <div data-role="page" id="caseSearchResults">
 <div data-role="content">
        <div data-role="header" data-position="fixed" data-id="header1">
            <h1 data-theme="e">Elaw.my</h1>
            <a href="caseSearch.html" id="back" data-icon="arrow-l" data-role="back" data-theme="b">Back</a>
            <a href="index.html" data-icon="gear" class="ui-btn-right" data-theme="b">Home</a>  
        </div><!-- /header -->
		<!--
		<div class="ui-grid-a">
			<div class="ui-block-a"><div><h2>Search</h2></div></div>
			<div class="ui-block-b"><div>
				<input type="text" name="name" id="ec" value=""/>
			</div>
			</div>
		</div><!-- /grid-a --> 
        <form id="searchInside">
		<div style="margin-bottom:20px;">
		<div class="ui-grid-a">
		<div class="ui-block-a">
        <div style="margin-left:5px;">        
         <input name="ns" id="newec" value="" type="search" placeholder="search..." data-mini="true">
		</div>
        </div>
		<div class="ui-block-b">
			<a id="dSearch" data-role="button" rel="external" href="#" data-mini="true" data-theme="e">Search</a>
		</div>  
        
		<div class="ui-block-a">
			<select name="srt" data-mini="true" id="sort">
				<option value="">Sort by</option>
				<option value="t">Title</option>
				<option value="y">Year</option>
				<option value="j">Judge</option>				
			</select>						
		</div>
		<div class="ui-block-b">
			<select name="srto" data-mini="true" id="order">
				<option value="a">Ascending</option>
				<option value="d">Descending</option>
			</select>			
        		
		</div>
		</div>
		</div>
        </form> 
		<!--
		
		<label for="one">Search</label>
		<input style="box-sizing: border-box;" type="text" id="one">
		<!--
		-->
     
       <ul data-role="listview" id="mylist2">
            <!-- <li data-role="list-divider">High Court Kuala Lumpur</li>
            <li><a href="">Audi</a></li>
            <li><a href="">BMW</a></li> -->
        </ul>
        <div data-role="footer" data-position="fixed" data-id="footer1" data-tap-toggle="false">        
                <div data-role="navbar">
                    <ul id="footerList">
                        <li><a href="#" data-icon="star" class="">Latest</a></li>
                        <li><a href="caseSearch.html" data-icon="search" data-theme="e">Cases</a></li>
                        <li><a href="legislationSearch.html" data-icon="search">Legislation</a></li>
                        <li><a href="references.html" data-icon="info">References</a></li>
                        <li><a href="help.html" data-icon="alert">Help</a></li>
                    </ul>
                </div>
        </div>    
        </div>
    <script>
    function url(args){
        var url = 'http://elaw.com.my/Elawf4/mobile/searchresultmobile.aspx?'
        url += args;
        url += '&callback=?'
        console.log(url);
        return url;

    }
    function runIt(){
        if(!$.caseSearchArgs){
            $.mobile.changePage('caseSearch.html');
        }
        var urltext = url($.caseSearchArgs);
        $.mobile.loading('show');
        $.getJson(urltext,'caseSearchResults')
    }
    function runIt2(){
    $("#dSearch").on("click",function(){
        var args = $("#searchInside").serialize();
        var match = $("#newec").val();
        args = args.replace('ns='+match,'');
        if(!$.ns)
            $.ns = $("#newec").val();        
        else
            $.ns += ' '+$("#newec").val();
        var urltext = url($.caseSearchArgs+'&ns='+$.ns+args);
        console.log(urltext);
        //return false;
        $.getJson(urltext,'caseSearchResults');
        //return false;
    });    
    $("#mylist2").on('click','li',function(){
        var filename = $(this).attr('name');
        //console.log($(this).attr('name'))    
        $.filename = filename;
        $.mobile.changePage('case.html');
    });
    

    }
    $('#caseSearchResults').on('pageshow', runIt);
    $('#caseSearchResults').on('pageinit', runIt2);
    </script>
    </div>
</body>
<html>